import{u as I}from"./quasar.esm.prod.c88b943c.js";import{a4 as x,Q as u,aG as t,ay as N,U as S,b1 as a,b3 as E,x as i,W as k,a2 as e,bp as P,a1 as p,D as A,A as T,bw as q,bD as F,X as D}from"./index.90ead00b.js";import{u as M}from"./popup.f1a4d1c1.js";import{u as R,g as H}from"./specialists.07b97c72.js";import{H as L,_ as V}from"./SortableList.8793b00b.js";import{f as G}from"./format-phone.df9e2fd4.js";import{S as O,M as $,A as j}from"./roles.61f7d6b9.js";import{api as Q}from"./api.9988d825.js";import"./base.bf638541.js";import"./toasts.5fba8d07.js";import"./_commonjsHelpers.2cf1d77b.js";const W=x({props:{specialist:{type:Object,required:!0}},setup(n){const c=n,_=u(()=>c.specialist.user),d=u(()=>{var r;return(r=_.value.avatar)==null?void 0:r.path}),o=u(()=>c.specialist.status),g=u(()=>o.value==="ALL"?"green":o.value==="DASHBOARD"?"orange":"gray");return(r,m)=>{const f=t("UiIcon"),v=t("UiAvatar"),h=t("UiIndicator"),l=t("UiText"),s=t("UiPanel");return N(),S(s,{to:{name:"specialistInfo",params:{slug:n.specialist.id}},class:T(["specialists-page-card",[{"specialists-page-card__inactive":n.specialist.user.active===!1}]])},{default:a(()=>[E((N(),k("div",{id:"hand",class:"specialists-page-card__hand",onClick:m[0]||(m[0]=P(()=>{},["prevent"]))},[e(f,{name:"outlined/hand-grabbing",size:"s"})])),[[i(L)]]),e(h,{class:"specialists-page-card__avatar",type:i(g)},{default:a(()=>[e(v,{image:i(d),name:n.specialist.fullName,size:"l"},null,8,["image","name"])]),_:1},8,["type"]),e(l,{class:"specialists-page-card__name",size:"l",strong:""},{default:a(()=>[p(A(n.specialist.fullName),1)]),_:1}),e(l,{class:"specialists-page-card__specialization",size:"m"},{default:a(()=>[p(A(n.specialist.specialization||"  "),1)]),_:1}),e(l,{class:"specialists-page-card__phone",size:"m"},{default:a(()=>[p(A(i(G)(i(_).phone)),1)]),_:1})]),_:1},8,["to","class"])}}});const X={class:"specialists-page-header"},J=p(" \u0421\u043F\u0456\u0432\u0440\u043E\u0431\u0456\u0442\u043D\u0438\u043A\u0438 "),K={class:"specialists-page-header__right"},Y=p(" \u0414\u043E\u0434\u0430\u0442\u0438 \u0441\u043F\u0456\u0432\u0440\u043E\u0431\u0456\u0442\u043D\u0438\u043A\u0430 "),le=x({setup(n){I({title:"\u0421\u043F\u0438\u0441\u043E\u043A \u0441\u043F\u0456\u0432\u0440\u043E\u0431\u0456\u0442\u043D\u0438\u043A\u0456\u0432 - pullcrm"});const c=q(),_=F(),d=M(),o=R(),g=u(()=>o.total),r=u(()=>H(c.query.role)||"\u0412\u0441\u0435"),m=u(()=>[{name:"\u0412\u0441\u0456"},{name:"\u0421\u043F\u0435\u0446\u0456\u0430\u043B\u0456\u0441\u0442\u0438",value:O},{name:"\u041C\u0435\u043D\u0435\u0434\u0436\u0435\u0440\u0438",value:$},{name:"\u041A\u0435\u0440\u0456\u0432\u043D\u0438\u043A\u0438",value:j}]),f=u(()=>o.specialists.filter(({role:s})=>c.query.role?s.name===c.query.role:!0));async function v(){await d.show("specialist-new")}async function h(s){await _.replace({query:{role:s.value||void 0}})}async function l(s){o.specialists=s;const b=s.map(({id:U},y)=>({id:U,order:y}));await Q.specialist.bulk(b),await o.fetch()}return(s,b)=>{const U=t("UiTitle"),y=t("UiNotificationBadge"),B=t("UiButton"),C=t("UiNavigation"),w=t("UiContainer");return N(),S(w,{class:"specialists-page"},{default:a(()=>[D("div",X,[e(y,{class:"specialists-page-header__left",count:i(g)},{default:a(()=>[e(U,{size:"l",responsive:""},{default:a(()=>[J]),_:1})]),_:1},8,["count"]),D("div",K,[e(B,{size:"m",theme:"blue",responsive:"","right-icon":"outlined/plus",onClick:v},{default:a(()=>[Y]),_:1})])]),e(C,{class:"specialists-page__navigation",navigation:i(m),value:i(r),onInput:h},null,8,["navigation","value"]),e(V,{list:i(f),axis:"xy","item-class":["ui-grid-item","ui-grid-item_12","ui-grid-item_tablet_6","ui-grid-item_laptop_4","ui-grid-item_desktop_3"],"use-drag-handle":"",class:"ui-grid","onUpdate:list":l},{default:a(({item:z})=>[e(W,{specialist:z},null,8,["specialist"])]),_:1},8,["list"])]),_:1})}}});export{le as default};
