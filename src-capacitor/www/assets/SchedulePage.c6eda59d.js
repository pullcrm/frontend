import{u as x}from"./quasar.esm.prod.c88b943c.js";import{u as M,C as V,a as A}from"./schedule.c0af0d3a.js";import{u as T}from"./specialist.1814df6d.js";import{f as $}from"./date-time.d466b3fd.js";import{p as z}from"./time.3f06d08e.js";import{f as U}from"./money.dd3f296a.js";import"./dayjs.228bf609.js";import{_ as b}from"./DatePicker.53fe15d2.js";import{a4 as k,Q as s,aG as C,ay as p,W as w,X as f,a2 as u,b1 as c,x as e,f as E,a1 as d,D as _,U as y,as as L,V as N}from"./index.90ead00b.js";import{d as g}from"./isTomorrow.a3ceb101.js";import{S as O}from"./Loader.9c247aee.js";import{a as P,b as Y}from"./Column.33db15ed.js";import"./base.bf638541.js";import"./_commonjsHelpers.2cf1d77b.js";import"./timetable.f64b6fb9.js";import"./popup.f1a4d1c1.js";import"./toasts.5fba8d07.js";import"./index.9890a0fb.js";import"./api.9988d825.js";const j={class:"specialist-schedule-page-header"},F={class:"specialist-schedule-page-header__left"},G=d(" \u0417\u0430\u0432\u0442\u0440\u0430 "),H=d(" \u0421\u044C\u043E\u0433\u043E\u0434\u043D\u0456 "),Q={class:"specialist-schedule-page-header__right"},R=f("span",null," - ",-1),W=k({props:{appointments:{type:Array,default:()=>[]}},setup(D){const n=D,r=M(),a=s({get(){return new Date(r.date)},set(o){const t=g(o).format("YYYY-MM-DD");r.date=t,r.fetch()}}),l=s(()=>g(a.value).isToday()),m=s(()=>n.appointments.length),h=s(()=>n.appointments.filter(({status:o})=>o===V).reduce((o,{total:t})=>o+t,0));function v(){a.value=g(new Date).add(1,"day").toDate()}return(o,t)=>{const i=C("UiButton"),S=C("UiPopover");return p(),w("div",j,[f("div",F,[u(S,{size:"m",placement:"bottom_start"},{body:c(()=>[u(b,{modelValue:e(a),"onUpdate:modelValue":t[0]||(t[0]=B=>E(a)?a.value=B:null)},null,8,["modelValue"])]),default:c(()=>[u(i,{class:"specialist-schedule-page-header__calendar",size:"m",theme:"transparent","left-icon":"outlined/calendar","right-icon":"solid/caret-down-fill"},{default:c(()=>[d(_(e($)(e(a),"D MMMM, dd")),1)]),_:1})]),_:1}),e(l)?(p(),y(i,{key:0,class:"specialist-schedule-page-header__tomorrow",size:"m",theme:"transparent",onClick:v},{default:c(()=>[G]),_:1})):(p(),y(i,{key:1,class:"specialist-schedule-page-header__today",size:"m",theme:"transparent",onClick:t[1]||(t[1]=B=>a.value=new Date)},{default:c(()=>[H]),_:1}))]),f("div",Q,[d(_(e(m))+" "+_(e(z)(e(m),"\u043A\u043B\u0456\u0454\u043D\u0442","\u043A\u043B\u0456\u0454\u043D\u0442\u0430","\u043A\u043B\u0456\u0454\u043D\u0442\u0456\u0432"))+" ",1),R,d(" "+_(e(U)(e(h))),1)])])}}});const X={class:"specialist-schedule-page"},q={ref:"inner",class:"specialist-schedule-page__schedule"},fe=k({setup(D){x({title:"\u041A\u0430\u043B\u0435\u043D\u0434\u0430\u0440 \u0441\u043F\u0435\u0446\u0456\u0430\u043B\u0456\u0441\u0442\u0430 - pullcrm"});const n=M(),r=T(),a=A(),l=s(()=>r.specialist),m=s(()=>n.isLoading),h=s(()=>n.normalizeTimeOffs),v=s(()=>a.appointments),o=s(()=>h.value.filter(({specialistId:i})=>i===l.value.id)),t=s(()=>v.value.filter(i=>i.specialist.id===l.value.id));return L(async()=>{await n.fetch}),(i,S)=>(p(),w("div",X,[u(W,{appointments:e(t)},null,8,["appointments"]),f("div",q,[e(m)?(p(),y(O,{key:0})):N("",!0),u(P,{class:"specialist-schedule-page__timeline"}),u(Y,{class:"specialist-schedule-page__column","time-offs":e(o),specialist:e(l),appointments:e(t)},null,8,["time-offs","specialist","appointments"])],512)]))}});export{fe as default};
