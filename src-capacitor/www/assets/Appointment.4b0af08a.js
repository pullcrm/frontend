var Te=Object.defineProperty,Ce=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var Ee=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable;var K=(s,u,a)=>u in s?Te(s,u,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[u]=a,Z=(s,u)=>{for(var a in u||(u={}))Ee.call(u,a)&&K(s,a,u[a]);if(J)for(var a of J(u))Fe.call(u,a)&&K(s,a,u[a]);return s},ee=(s,u)=>Ce(s,$e(u));import{a4 as $,Q as h,aG as n,ay as U,W as C,a2 as t,b1 as o,a1 as b,D as z,I as Ie,aE as De,U as x,bp as W,x as f,V as P,X as A,f as xe,A as V,k as N,as as j,ao as Ae,aF as Me,r as oe,aY as R,B as te,ak as ue}from"./index.90ead00b.js";import{u as G}from"./sms.892ef9cc.js";import{u as ne}from"./popup.f1a4d1c1.js";import{u as ie}from"./toasts.5fba8d07.js";import{s as se,C as ke,e as Be,b as le,I as Q,u as X,c as ae,a as pe,d as re}from"./schedule.c0af0d3a.js";import{u as de}from"./specialists.07b97c72.js";import{m as ce,b as ze}from"./time.3f06d08e.js";import{u as Ne}from"./timetable.f64b6fb9.js";import{T as Ve,e as me,S as Re}from"./base.bf638541.js";import"./dayjs.228bf609.js";import{f as Pe,t as qe}from"./date-time.d466b3fd.js";import{_ as Ye}from"./DatePicker.53fe15d2.js";import{d as _e}from"./isTomorrow.a3ceb101.js";import{f as Oe}from"./money.dd3f296a.js";import{api as L}from"./api.9988d825.js";import"./roles.61f7d6b9.js";import"./_commonjsHelpers.2cf1d77b.js";const He={class:"appointment-popup-header"},ve=$({props:{title:{type:String,required:!0},status:{type:String,required:!0}},emits:["update:status"],setup(s){const u=s,a=h(()=>se[u.status]),d=h(()=>[ke,Be,le,Q].map(l=>({name:se[l],value:l})));return(l,c)=>{const i=n("UiTitle"),y=n("UiText"),m=n("UiDropdownList"),_=n("UiPopover");return U(),C("div",He,[t(i,{class:"appointment-popup-header__title",size:"l",responsive:""},{default:o(()=>[b(z(s.title),1)]),_:1}),t(_,{ref:"popover",size:"m",placement:"bottom_end"},{body:o(({close:e})=>[t(m,null,{default:o(()=>[(U(!0),C(Ie,null,De(f(d),g=>(U(),x(y,{key:g.value,tag:"a",href:"#",size:"m","left-icon":g.value===s.status?"outlined/check":"outlined/minus",onClick:W(E=>(e(),l.$emit("update:status",g.value)),["prevent"])},{default:o(()=>[b(z(g.name),1)]),_:2},1032,["left-icon","onClick"]))),128))]),_:2},1024)]),default:o(()=>[t(y,{class:"appointment-popup-header__status",tag:"a",href:"#",size:"l","right-icon":"outlined/caret-down",responsive:""},{default:o(()=>[b(z(f(a)),1)]),_:1})]),_:1},512)])}}});const Le={class:"appointment-popup-notify"},We=b(" \u0421\u041C\u0421 \u043E\u043F\u043E\u0432\u0456\u0449\u0435\u043D\u043D\u044F "),je=b(" \u041F\u043E\u0432\u0456\u0434\u043E\u043C\u0438\u0442\u0438 \u043F\u0440\u043E \u0437\u0430\u043F\u0438\u0441 "),fe=$({props:{type:{type:String,required:!0},hasRemindSms:{type:Boolean,required:!0},hasCreationSms:{type:Boolean,default:!1}},emits:["update:hasCreationSms","update:hasRemindSms"],setup(s){const u=G(),a=h(()=>u.settings.remindSMSMinutes);return(d,l)=>{const c=n("UiTitle"),i=n("UiText"),y=n("UiSwitch"),m=n("UiField");return U(),C("div",Le,[t(c,{class:"appointment-popup-notify__title",size:"s",responsive:""},{default:o(()=>[We]),_:1}),s.type==="new"?(U(),x(m,{key:0},{default:o(()=>[t(y,{value:s.hasCreationSms,size:"m",onInput:l[0]||(l[0]=_=>d.$emit("update:hasCreationSms",_))},{append:o(()=>[t(i,{size:"m",responsive:""},{default:o(()=>[je]),_:1})]),_:1},8,["value"])]),_:1})):P("",!0),t(m,null,{default:o(()=>[t(y,{value:s.hasRemindSms,size:"m",onInput:l[1]||(l[1]=_=>d.$emit("update:hasRemindSms",_))},{append:o(()=>[t(i,{size:"m",responsive:""},{default:o(()=>[b(" \u041D\u0430\u0433\u0430\u0434\u0430\u0442\u0438 \u043F\u0440\u043E \u0437\u0430\u043F\u0438\u0441 \u0437\u0430 "+z(f(ce)(f(a)))+" \u0434\u043E \u043F\u043E\u0447\u0430\u0442\u043A\u0443 ",1)]),_:1})]),_:1},8,["value"])]),_:1})])}}});const Ge={class:"appointment-popup-date-time"},Qe={class:"appointment-popup-date-time__inner ui-grid"},Se=$({props:{date:{type:Object,default:null},status:{type:String,required:!0},startAt:{type:String,default:null},duration:{type:Number,required:!0},availableHours:{type:Array,default:()=>[]}},emits:["update:date","update:startAt"],setup(s,{emit:u}){const a=s,d=X(),l=Ne(),c=h(()=>a.status!==Q),i=h({get(){return a.date?new Date(a.date.toString()):new Date(d.date)},set(_){u("update:date",_e(_))}}),y=h(()=>l.workingHours),m=h(()=>{const _=a.duration/Ve;return ze(y.value,a.startAt,_)});return(_,e)=>{const g=n("UiInput"),E=n("UiField"),M=n("UiPopover"),k=n("UiSelect"),F=n("UiText");return U(),C("div",Ge,[A("div",Qe,[t(M,{class:V(["ui-grid-item","ui-grid-item_12","ui-grid-item_tablet_4"]),size:"m",placement:"bottom_start"},{body:o(()=>[t(Ye,{modelValue:f(i),"onUpdate:modelValue":e[0]||(e[0]=I=>xe(i)?i.value=I:null)},null,8,["modelValue"])]),default:o(()=>[t(E,{label:"\u0414\u0430\u0442\u0430"},{default:o(()=>[t(g,{value:f(Pe)(f(i),"D MMMM YYYY"),readonly:"","left-icon":"outlined/calendar-blank"},null,8,["value"])]),_:1})]),_:1}),t(E,{class:V(["ui-grid-item","ui-grid-item_12","ui-grid-item_tablet_4"]),label:"\u0427\u0430\u0441 \u043F\u043E\u0447\u0430\u0442\u043A\u0443"},{default:o(()=>[t(k,{value:s.startAt,options:s.availableHours,required:f(c),"left-icon":"outlined/clock",placeholder:"00:00",onInput:e[1]||(e[1]=I=>_.$emit("update:startAt",I))},null,8,["value","options","required"])]),_:1}),t(E,{class:V(["ui-grid-item","ui-grid-item_12","ui-grid-item_tablet_4"]),label:"\u0422\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C"},{default:o(()=>[t(g,{value:f(ce)(s.duration),readonly:"",disabled:"",placeholder:"00:00","left-icon":"outlined/clock-afternoon"},null,8,["value"])]),_:1})]),s.startAt&&s.duration>0?(U(),x(F,{key:0,class:"appointment-popup-date-time__time-end",size:"m",responsive:""},{default:o(()=>[b(" \u0417\u0430\u0432\u0435\u0440\u0448\u0443\u0454\u0442\u044C\u0441\u044F \u0432 "+z(f(m)),1)]),_:1})):P("",!0)])}}});const Xe={class:"appointment-popup-client-simple"},Je=b(" \u041A\u043B\u0456\u0454\u043D\u0442 "),Ke={class:"ui-grid"},ye=$({props:{name:{type:String,default:""},phone:{type:String,default:""}},emits:["update:name","update:phone"],setup(s){return(u,a)=>{const d=n("UiTitle"),l=n("UiInput"),c=n("UiField");return U(),C("div",Xe,[t(d,{class:"appointment-popup-client-simple__title",size:"s",responsive:""},{default:o(()=>[Je]),_:1}),A("div",Ke,[t(c,{class:V(["ui-grid-item","ui-grid-item_12","ui-grid-item_tablet_6"])},{default:o(()=>[t(l,{value:s.name,placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u0456\u043C'\u044F",onInput:a[0]||(a[0]=i=>u.$emit("update:name",i))},null,8,["value"])]),_:1}),t(c,{class:V(["ui-grid-item","ui-grid-item_12","ui-grid-item_tablet_6"])},{default:o(()=>[t(l,{mask:"+38 (###) #### ###",value:s.phone,inputmode:"tel",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0443",onInput:a[1]||(a[1]=i=>u.$emit("update:phone",i))},null,8,["value"])]),_:1})])])}}});const Ze={class:"appointment-popup-specialist-select"},et=b(" \u0412\u0438\u043A\u043E\u043D\u0430\u0432\u0435\u0446\u044C "),he=$({props:{specialist:{type:Object,default:null},options:{type:Array,default:()=>[]}},emits:["update:specialist"],setup(s){return(u,a)=>{const d=n("UiTitle"),l=n("UiSelect"),c=n("UiField");return U(),C("div",Ze,[t(d,{class:"appointment-popup-specialist-select__title",size:"s",responsive:""},{default:o(()=>[et]),_:1}),t(c,null,{default:o(()=>[t(l,{value:s.specialist,required:"",options:s.options,"label-key":"fullName",placeholder:"\u0412\u0438\u0431\u0440\u0430\u0442\u0438 \u0432\u0438\u043A\u043E\u043D\u0430\u0432\u0446\u044F",onInput:a[0]||(a[0]=i=>u.$emit("update:specialist",i))},null,8,["value","options"])]),_:1})])}}});const tt={class:"appointment-popup-procedures-select"},ut=b(" \u041F\u043E\u0441\u043B\u0443\u0433\u0438 "),st=b(" \u0412\u0438\u0431\u0440\u0430\u043D\u043E: "),at=b(" / \u0421\u0443\u043C\u0430: "),ot={class:"appointment-popup-procedures-select__price"},Ue=$({props:{total:{type:Number,required:!0},options:{type:Array,default:()=>[]},procedures:{type:Array,default:()=>[]}},emits:["update:procedures","update:total"],setup(s,{emit:u}){const a=s,d=N(null),l=h(()=>a.procedures.length);function c(y){var _;if(u("update:procedures",y),d.value)return;const m=(_=y.reduce((e,{price:g})=>e+g,0))!=null?_:0;u("update:total",m)}function i(y){d.value=Number(y),u("update:total",Number(y))}return(y,m)=>{const _=n("UiTitle"),e=n("UiInput"),g=n("UiField"),E=n("UiPopover"),M=n("UiText"),k=n("UiMultiSelect");return U(),C("div",tt,[t(_,{class:"appointment-popup-procedures-select__title",size:"s",responsive:""},{default:o(()=>[ut]),_:1}),t(M,{class:"appointment-popup-procedures-select__sub-title",size:"m",responsive:""},{default:o(()=>[st,A("strong",null,z(f(l)),1),at,t(E,{class:"appointment-popup-procedures-select__price-popover",size:"s",placement:"bottom"},{body:o(()=>[t(g,null,{default:o(()=>[t(e,{value:d.value||s.total,type:"number",placeholder:"\u0426\u0456\u043D\u0430",onInput:i},null,8,["value"])]),_:1})]),default:o(()=>[A("div",ot,z(f(Oe)(s.total)),1)]),_:1})]),_:1}),t(g,null,{default:o(()=>[t(k,{value:s.procedures,options:s.options,"label-key":"name",placeholder:"\u0412\u0438\u0431\u0440\u0430\u0442\u0438 \u043F\u043E\u0441\u043B\u0443\u0433\u0438",onInput:m[0]||(m[0]=F=>c(F))},null,8,["value","options"])]),_:1})])}}});const nt={class:"appointment-popup-additional-settings"},be=$({props:{type:{type:String,required:!0},source:{type:String,required:!0}},emits:["update:source"],setup(s){const u=s,a=h(()=>ae[u.source]),d=h(()=>[me,Re].map(l=>({name:ae[l],value:l})));return(l,c)=>{const i=n("UiSelect"),y=n("UiField");return U(),C("div",nt,[t(y,{label:"\u0414\u0436\u0435\u0440\u0435\u043B\u043E"},{default:o(()=>[t(i,{value:f(a),options:f(d),required:"","label-key":"name",disabled:"",placeholder:"\u0412\u0438\u0431\u0440\u0430\u0442\u0438 \u0447\u0430\u0441",onInput:c[0]||(c[0]=m=>l.$emit("update:source",m.value))},null,8,["value","options"])]),_:1})])}}});const ge=$({props:{threshold:{type:Number,default:.66},showWhenInvisible:{type:String,required:!0}},setup(s){const u=s,a=N(!1),d=N(new Map);j(()=>{if(u.showWhenInvisible){const c=new IntersectionObserver(l,{threshold:u.threshold});[...document.querySelectorAll(u.showWhenInvisible)].forEach(i=>{c.observe(i),d.value.set(i,!1)}),Ae(()=>{c.disconnect(),d.value.clear()})}});function l(c){c.forEach(({target:i,isIntersecting:y})=>{d.value.set(i,y)}),a.value=![...d.value.values()].some(i=>i)}return(c,i)=>(U(),C("div",{class:V(["fixed-panel",{_visible:a.value}]),"data-test":"fixed-panel"},[Me(c.$slots,"default")],2))}}),it={class:"appointment-popup__inner"},lt=["onSubmit"],pt={id:"popup-actions",class:"appointment-popup__actions"},rt=b(" \u0414\u043E\u0434\u0430\u0442\u0438 \u0437\u0430\u043F\u0438\u0441 "),dt=b(" \u0414\u043E\u0434\u0430\u0442\u0438 \u0437\u0430\u043F\u0438\u0441 "),ct=$({props:{specialistId:{type:Number,default:null},time:{type:String,default:null},defaultStatus:{type:String,default:void 0}},setup(s){var T,r;const u=s,a=G(),d=ne(),l=ie(),c=X(),i=de(),y=pe(),m=N(!1);let _=oe([]);const e=N({date:qe(c.date),total:0,phone:"",source:me,status:le,fullName:"",startTime:u.time,specialist:u.specialistId&&i.specialists.find(({id:w})=>w===u.specialistId),procedures:[],description:"",hasRemindSMS:!1,hasCreationSMS:!1});u.defaultStatus&&(e.value.status=u.defaultStatus),e.value.status!==Q&&(e.value.hasRemindSMS=(T=a.settings)==null?void 0:T.hasRemindSMS,e.value.hasCreationSMS=(r=a.settings)==null?void 0:r.hasCreationSMS);const g=h(()=>a.isAuthorize),E=h(()=>i.specialists),M=h(()=>{var w,p;return(p=(w=e.value.specialist)==null?void 0:w.procedures)!=null?p:[]}),k=h(()=>e.value.date),F=h(()=>e.value.specialist),I=h(()=>{const w=e.value.procedures||[];return re({procedures:w})});R(()=>I.value,async()=>{await D(),B()}),R(()=>F.value,async()=>{await D(),B()}),R(()=>k.value,async()=>{await D(),B()}),j(()=>{D()});async function Y(){if(!!await O())try{m.value=!0,await y.create(e.value),d.hide()}catch(p){if(p.code===400){await l.show({type:"error",title:p.message});return}throw p}finally{await c.fetch(),m.value=!1}}async function D(){var w;_=[],!(!((w=e.value.specialist)!=null&&w.id)||I.value===0)&&(_=await L.appointments.availableTime({date:e.value.date.format("YYYY-MM-DD"),specialistId:e.value.specialist.id,duration:I.value}))}function B(){_.indexOf(e.value.startTime)===-1&&(e.value.startTime=null)}async function O(){const{procedures:w}=e.value;return w.length===0?(await l.show({type:"error",title:"\u041F\u043E\u0442\u0440\u0456\u0431\u043D\u043E \u0432\u0438\u0431\u0440\u0430\u0442\u0438 \u043F\u043E\u0441\u043B\u0443\u0433\u0438"}),!1):!0}return(w,p)=>{const q=n("UiInput"),H=n("UiField"),v=n("UiButton"),we=n("UiContainer");return U(),C("div",it,[t(ve,{status:e.value.status,"onUpdate:status":p[0]||(p[0]=S=>e.value.status=S),class:"appointment-popup__header",title:"\u041D\u043E\u0432\u0438\u0439 \u0437\u0430\u043F\u0438\u0441"},null,8,["status"]),A("form",{onSubmit:W(Y,["prevent"])},[t(ye,{name:e.value.fullName,"onUpdate:name":p[1]||(p[1]=S=>e.value.fullName=S),phone:e.value.phone,"onUpdate:phone":p[2]||(p[2]=S=>e.value.phone=S)},null,8,["name","phone"]),t(he,{specialist:e.value.specialist,"onUpdate:specialist":p[3]||(p[3]=S=>e.value.specialist=S),class:"appointment-popup__specialist",options:f(E)},null,8,["specialist","options"]),t(Ue,{total:e.value.total,"onUpdate:total":p[4]||(p[4]=S=>e.value.total=S),procedures:e.value.procedures,"onUpdate:procedures":p[5]||(p[5]=S=>e.value.procedures=S),class:"appointment-popup__procedures",options:f(M)},null,8,["total","procedures","options"]),t(Se,{date:e.value.date,"onUpdate:date":p[6]||(p[6]=S=>e.value.date=S),"start-at":e.value.startTime,"onUpdate:start-at":p[7]||(p[7]=S=>e.value.startTime=S),class:"appointment-popup__date-time",status:e.value.status,duration:f(I),"available-hours":f(_)},null,8,["date","start-at","status","duration","available-hours"]),t(H,{class:"appointment-popup__comment",label:"\u041A\u043E\u043C\u0435\u043D\u0442\u0430\u0440"},{default:o(()=>[t(q,{modelValue:e.value.description,"onUpdate:modelValue":p[8]||(p[8]=S=>e.value.description=S),tag:"textarea",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u0442\u0435\u043A\u0441\u0442"},null,8,["modelValue"])]),_:1}),f(g)?(U(),x(fe,{key:0,"has-remind-sms":e.value.hasRemindSMS,"onUpdate:has-remind-sms":p[9]||(p[9]=S=>e.value.hasRemindSMS=S),"has-creation-sms":e.value.hasCreationSMS,"onUpdate:has-creation-sms":p[10]||(p[10]=S=>e.value.hasCreationSMS=S),class:"appointment-popup__notify",type:"new"},null,8,["has-remind-sms","has-creation-sms"])):P("",!0),t(be,{source:e.value.source,"onUpdate:source":p[11]||(p[11]=S=>e.value.source=S),class:"appointment-popup__additional-settings",type:"new"},null,8,["source"]),A("div",pt,[t(v,{type:"submit",size:"m",theme:"blue",loading:m.value},{default:o(()=>[rt]),_:1},8,["loading"])]),t(ge,{threshold:.25,"show-when-invisible":"#popup-actions",class:"appointment-popup__fixed-button"},{default:o(()=>[t(we,{narrow:""},{default:o(()=>[t(v,{type:"submit",size:"m",theme:"blue",loading:m.value},{default:o(()=>[dt]),_:1},8,["loading"])]),_:1})]),_:1},8,["threshold"])],40,lt)])}}}),mt={class:"appointment-popup__inner"},_t=["onSubmit"],vt={id:"popup-actions",class:"appointment-popup__actions"},ft=b(" \u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 "),St=b(" \u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 "),yt=b(" \u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 "),ht=$({props:{appointment:{type:Object,required:!0}},setup(s){const u=s,a=G(),d=ne(),l=ie(),c=X(),i=de(),y=pe(),m=N(!1);let _=oe([]);const e=N(ee(Z({},u.appointment),{date:_e(u.appointment.date),specialist:i.specialists.find(({id:T})=>T===u.appointment.specialist.id),hasRemindSMS:a.isAuthorize?Boolean(u.appointment.smsIdentifier):null})),g=h(()=>i.specialists),E=h(()=>e.value.specialist.procedures),M=h(()=>e.value.date),k=h(()=>e.value.specialist),F=h(()=>{const T=e.value.procedures||[];return re({procedures:T})});j(()=>{D()}),R(()=>F.value,async()=>{await D(),B()}),R(()=>k.value,async()=>{await D(),B()}),R(()=>M.value,async()=>{await D(),B()});async function I(){if(!!await O())try{m.value=!0,await y.update(e.value),await c.fetch(),d.hide()}catch(r){if(r.code===400){l.show({type:"error",title:r.message});return}throw r}finally{m.value=!1}}async function Y(){try{m.value=!0,await d.askQuestion({title:"\u0412\u0438 \u0434\u0456\u0439\u0441\u043D\u043E \u0445\u043E\u0447\u0435\u0442\u0435 \u0432\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u0446\u0435\u0439 \u0437\u0430\u043F\u0438\u0441?",acceptButtonTitle:"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438"})&&(await L.appointments.remove(e.value.id),await c.fetch(),d.hide())}finally{m.value=!1}}async function D(){var T;_=[],!(!((T=e.value.specialist)!=null&&T.id)||F.value===0)&&(_=await L.appointments.availableTime({date:e.value.date.format("YYYY-MM-DD"),excludeId:e.value.id,specialistId:e.value.specialist.id,duration:F.value}))}function B(){_.indexOf(e.value.startTime)===-1&&(e.value.startTime=null)}async function O(){const{procedures:T}=e.value;return T.length===0?(await l.show({type:"error",title:"\u041F\u043E\u0442\u0440\u0456\u0431\u043D\u043E \u0432\u0438\u0431\u0440\u0430\u0442\u0438 \u043F\u043E\u0441\u043B\u0443\u0433\u0438"}),!1):!0}return(T,r)=>{const w=n("UiInput"),p=n("UiField"),q=n("UiButton"),H=n("UiContainer");return U(),C("div",mt,[t(ve,{status:e.value.status,"onUpdate:status":r[0]||(r[0]=v=>e.value.status=v),class:"appointment-popup__header",title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"},null,8,["status"]),A("form",{onSubmit:W(I,["prevent"])},[t(ye,{name:e.value.fullName,"onUpdate:name":r[1]||(r[1]=v=>e.value.fullName=v),phone:e.value.phone,"onUpdate:phone":r[2]||(r[2]=v=>e.value.phone=v)},null,8,["name","phone"]),t(he,{specialist:e.value.specialist,"onUpdate:specialist":r[3]||(r[3]=v=>e.value.specialist=v),class:"appointment-popup__specialist",options:f(g)},null,8,["specialist","options"]),t(Ue,{total:e.value.total,"onUpdate:total":r[4]||(r[4]=v=>e.value.total=v),procedures:e.value.procedures,"onUpdate:procedures":r[5]||(r[5]=v=>e.value.procedures=v),class:"appointment-popup__procedures",options:f(E)},null,8,["total","procedures","options"]),t(Se,{date:e.value.date,"onUpdate:date":r[6]||(r[6]=v=>e.value.date=v),"start-at":e.value.startTime,"onUpdate:start-at":r[7]||(r[7]=v=>e.value.startTime=v),class:"appointment-popup__date-time",status:e.value.status,duration:f(F),"available-hours":f(_)},null,8,["date","start-at","status","duration","available-hours"]),t(p,{class:"appointment-popup__comment",label:"\u041A\u043E\u043C\u0435\u043D\u0442\u0430\u0440"},{default:o(()=>[t(w,{modelValue:e.value.description,"onUpdate:modelValue":r[8]||(r[8]=v=>e.value.description=v),tag:"textarea",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u0442\u0435\u043A\u0441\u0442"},null,8,["modelValue"])]),_:1}),f(a).isAuthorize?(U(),x(fe,{key:0,"has-remind-sms":e.value.hasRemindSMS,"onUpdate:has-remind-sms":r[9]||(r[9]=v=>e.value.hasRemindSMS=v),"has-creation-sms":e.value.hasCreationSMS,"onUpdate:has-creation-sms":r[10]||(r[10]=v=>e.value.hasCreationSMS=v),class:"appointment-popup__notify",type:"edit"},null,8,["has-remind-sms","has-creation-sms"])):P("",!0),t(be,{source:e.value.source,"onUpdate:source":r[11]||(r[11]=v=>e.value.source=v),class:"appointment-popup__additional-settings",type:"edit"},null,8,["source"]),A("div",vt,[t(q,{type:"submit",size:"m",theme:"blue",loading:m.value},{default:o(()=>[ft]),_:1},8,["loading"]),t(q,{size:"m",theme:"danger-outlined",loading:m.value,onClick:Y},{default:o(()=>[St]),_:1},8,["loading"])]),t(ge,{threshold:.25,"show-when-invisible":"#popup-actions",class:"appointment-popup__fixed-button"},{default:o(()=>[t(H,{narrow:""},{default:o(()=>[t(q,{type:"submit",size:"m",theme:"blue",loading:m.value},{default:o(()=>[yt]),_:1},8,["loading"])]),_:1})]),_:1},8,["threshold"])],40,_t)])}}});const Vt=$({props:{type:{type:String,default:"new"}},emits:["close"],setup(s){return(u,a)=>{const d=n("UiBack"),l=n("UiContainer"),c=n("UiPopup");return U(),x(c,{class:"appointment-popup","full-page":"",closable:!1,onClose:a[1]||(a[1]=i=>u.$emit("close"))},{default:o(()=>[t(l,{narrow:""},{default:o(()=>[t(d,{class:"appointment-popup__back",onClick:a[0]||(a[0]=i=>u.$emit("close"))}),s.type==="new"?(U(),x(ct,te(ue({key:0},u.$attrs)),null,16)):P("",!0),s.type==="edit"?(U(),x(ht,te(ue({key:1},u.$attrs)),null,16)):P("",!0)]),_:1})]),_:1})}}});export{Vt as default};
