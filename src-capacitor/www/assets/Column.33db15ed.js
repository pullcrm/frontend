import{u as H}from"./timetable.f64b6fb9.js";import{a4 as b,k as O,Q as e,aG as $,ay as a,W as T,X as p,a2 as S,b1 as g,a1 as y,D as d,x as i,U as x,V as B,A as j,C as I,I as z,aE as D,aF as q}from"./index.90ead00b.js";import{u as R}from"./popup.f1a4d1c1.js";import{a as F,b as W,c as h}from"./time.3f06d08e.js";import{S as L,T as Q,d as A}from"./base.bf638541.js";import{u as Y}from"./toasts.5fba8d07.js";import{u as X,b as J,s as K,c as Z,g as ee,d as te,I as se}from"./schedule.c0af0d3a.js";import{o as ne}from"./index.9890a0fb.js";import"./api.9988d825.js";import{f as oe}from"./money.dd3f296a.js";const ie=p("div",{class:"appointment__divider"},null,-1),re={class:"appointment__inner"},ae={class:"appointment__header"},ue={class:"appointment__title"},le=p("div",{class:"appointment__space"},null,-1),ce={class:"appointment__footer"},pe={class:"appointment__price"},me=b({props:{appointment:{type:Object,required:!0},responsive:{type:Boolean,default:!1}},setup(s){const t=s,n=R();Y(),X();const m=H(),u=O(null),o=O(!1),l=e(()=>{const{status:k,source:E}=t.appointment;return E===L&&k===J?"IN_PROGRESS_WIDGET":k}),f=e(()=>K[t.appointment.status]),w=e(()=>Z[t.appointment.source]),C=e(()=>ee(t.appointment)),c=e(()=>te(t.appointment)),U=e(()=>m.workingHours);e(()=>F(U.value,{timeStart:t.appointment.startTime,totalTime:c.value}));const r=e(()=>c.value<30?"xs":c.value<45?"s":c.value<60?"m":c.value<75?"l":"xl"),_=e(()=>t.appointment.startTime),v=e(()=>{const k=c.value/Q;return W(U.value,_.value,k)}),M=e(()=>{if(t.appointment.status!==se)return{gridRow:`${h(_.value)}-start / ${h(v.value)}-start`,gridColumn:"start / end"}});function P(){}function G(){n.show({name:"appointment",props:{type:"edit",appointment:t.appointment}})}return ne(u,()=>{o.value&&(o.value=!1)}),(k,E)=>{const V=$("UiBadge"),N=$("UiText");return a(),T("div",{ref_key:"root",ref:u,class:j(["appointment",`appointment_size_${i(r)}`,`appointment_status_${i(l)}`,{"appointment_is-active":o.value},{appointment_responsive:s.responsive}]),style:I(i(M)),onDblclick:G,onClick:E[0]||(E[0]=Te=>o.value=!0)},[ie,p("div",re,[p("div",ae,[S(V,{ref_key:"status",ref:l,size:"m",theme:"custom",clickable:"",onClick:P},{default:g(()=>[y(d(i(f)),1)]),_:1},512),S(N,{size:"s",class:"appointment__type"},{default:g(()=>[y(d(i(w)),1)]),_:1})]),p("div",ue,d(s.appointment.fullName),1),S(N,{class:"appointment__sub-title",size:"s"},{default:g(()=>[y(d(i(C)),1)]),_:1}),le,p("div",ce,[s.appointment.startTime?(a(),x(N,{key:0,size:"s","left-icon":"outlined/clock",class:"appointment__duration"},{default:g(()=>[y(d(i(_))+" - "+d(i(v)),1)]),_:1})):B("",!0),p("div",pe,d(i(oe)(s.appointment.total)),1)])])],38)}}});const _e={class:"schedule-timeline"},Ue=b({setup(s){const t=H(),n=e(()=>t.workingHours),m=e(()=>n.value.filter((u,o)=>o%2===0));return(u,o)=>{const l=$("UiText");return a(),T("div",_e,[(a(!0),T(z,null,D(i(m),f=>(a(),T("div",{key:f,class:"schedule-timeline__item"},[S(l,{size:"s"},{default:g(()=>[y(d(f),1)]),_:2},1024)]))),128))])}}});const de=b({props:{timeOff:{type:Object,required:!0}},setup(s){const t=s,n=R(),m=e(()=>t.timeOff.description.slice(0,15)),u=e(()=>h(t.timeOff.startTime)),o=e(()=>h(t.timeOff.endTime)),l=e(()=>({gridRow:`${u.value}-start / ${o.value}-start`,gridColumn:"start / end"}));function f(){n.show({name:"time-off-edit",props:{timeOff:t.timeOff}})}return(w,C)=>{const c=$("UiText");return a(),x(c,{class:"schedule-timeoff",size:"l",responsive:"",style:I(i(l)),onDblclick:f},{default:g(()=>[y(d(i(m)),1)]),_:1},8,["style"])}}});const fe=b({props:{time:{type:String,required:!0}},setup(s){const t=s,n=O(null),m=e(()=>{const u=h(t.time);return{gridRow:`${u}-start / ${u}-end`,gridColumn:"start / end"}});return(u,o)=>{const l=$("UiIcon");return a(),T("div",{class:"schedule-hour-tile",style:I(i(m))},[p("div",{ref_key:"icon",ref:n,class:"schedule-hour-tile__icon"},[S(l,{size:"xs",name:"outlined/plus"})],512)],4)}}});const ve={class:"schedule-column"},Ee=b({props:{specialist:null,appointments:null,timeOffs:null},setup(s){const t=s,n=O(null),m=R(),u=H(),o=e(()=>u.workingHours),l=e(()=>o.value.map((r,_)=>(r=h(r),_===o.value.length-1?`[${r}-start] 0px [${r}-end] 0`:`[${r}-start] ${A}px [${r}-end] 0`)).join(" ")),f=e(()=>({gridTemplateColumns:"[start] 100% [end] 0",gridTemplateRows:l.value}));function w(){}function C(){!n.value||m.show({name:"appointment",props:{type:"new",time:n.value,specialistId:t.specialist.id}})}function c(r){const _=Math.floor(r.offsetY/A);r.offsetY>0&&o.value[_]!==n.value&&(n.value=o.value[_])}function U(){n.value=null}return(r,_)=>(a(),T("div",ve,[q(r.$slots,"append"),p("div",{class:"schedule-column__grid",style:I(i(f))},[(a(!0),T(z,null,D(s.appointments,v=>(a(),x(me,{key:`appointment-${v.id}`,responsive:"",appointment:v},null,8,["appointment"]))),128)),(a(!0),T(z,null,D(s.timeOffs,v=>(a(),x(de,{key:`time-off-${v.id}`,"time-off":v},null,8,["time-off"]))),128)),n.value?(a(),x(fe,{key:0,ref:"hourTile",time:n.value,specialist:s.specialist,class:"schedule-column__hour-tile"},null,8,["time","specialist"])):B("",!0),p("div",{class:"schedule-column__cursor",onClick:w,onDblclick:C,onMousemove:c,onMouseleave:U},null,32)],4)]))}});export{me as _,Ue as a,Ee as b};
