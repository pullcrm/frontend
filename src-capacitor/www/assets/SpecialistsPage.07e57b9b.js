import{u as I}from"./quasar.esm.prod.7cf60e50.js";import{a4 as S,Q as u,aG as a,ay as N,U as b,b1 as t,b3 as E,x as i,W as k,a2 as e,bp as P,a1 as p,D as A,A as T,bx as q,bD as F,X as D}from"./index.53588f62.js";import{u as M}from"./popup.f1b7e5e0.js";import{u as R,g as H}from"./specialists.56f430f2.js";import{H as L,_ as V}from"./SortableList.ae0e9200.js";import{f as G}from"./format-phone.df9e2fd4.js";import{S as O,M as $,A as j}from"./roles.61f7d6b9.js";import{api as Q}from"./api.50e126cb.js";import"./base.686dbe64.js";import"./toasts.113f48d8.js";import"./_commonjsHelpers.2cf1d77b.js";const W=S({name:"Card",props:{specialist:{type:Object,required:!0}},setup(n){const c=n,_=u(()=>c.specialist.user),d=u(()=>{var r;return(r=_.value.avatar)==null?void 0:r.path}),o=u(()=>c.specialist.status),g=u(()=>o.value==="ALL"?"green":o.value==="DASHBOARD"?"orange":"gray");return(r,m)=>{const f=a("UiIcon"),v=a("UiAvatar"),h=a("UiIndicator"),l=a("UiText"),s=a("UiPanel");return N(),b(s,{to:{name:"specialistInfo",params:{slug:n.specialist.id}},class:T(["specialists-page-card",[{"specialists-page-card__inactive":n.specialist.user.active===!1}]])},{default:t(()=>[E((N(),k("div",{id:"hand",class:"specialists-page-card__hand",onClick:m[0]||(m[0]=P(()=>{},["prevent"]))},[e(f,{name:"outlined/hand-grabbing",size:"s"})])),[[i(L)]]),e(h,{class:"specialists-page-card__avatar",type:i(g)},{default:t(()=>[e(v,{image:i(d),name:n.specialist.fullName,size:"l"},null,8,["image","name"])]),_:1},8,["type"]),e(l,{class:"specialists-page-card__name",size:"l",strong:""},{default:t(()=>[p(A(n.specialist.fullName),1)]),_:1}),e(l,{class:"specialists-page-card__specialization",size:"m"},{default:t(()=>[p(A(n.specialist.specialization),1)]),_:1}),e(l,{class:"specialists-page-card__phone",size:"m"},{default:t(()=>[p(A(i(G)(i(_).phone)),1)]),_:1})]),_:1},8,["to","class"])}}});const X={class:"specialists-page-header"},J=p(" \u0421\u043F\u0456\u0432\u0440\u043E\u0431\u0456\u0442\u043D\u0438\u043A\u0438 "),K={class:"specialists-page-header__right"},Y=p(" \u0414\u043E\u0434\u0430\u0442\u0438 \u0441\u043F\u0456\u0432\u0440\u043E\u0431\u0456\u0442\u043D\u0438\u043A\u0430 "),le=S({name:"SpecialistsPage",setup(n){I({title:"\u0421\u043F\u0438\u0441\u043E\u043A \u0441\u043F\u0456\u0432\u0440\u043E\u0431\u0456\u0442\u043D\u0438\u043A\u0456\u0432 - pullcrm"});const c=q(),_=F(),d=M(),o=R(),g=u(()=>o.total),r=u(()=>H(c.query.role)||"\u0412\u0441\u0435"),m=u(()=>[{name:"\u0412\u0441\u0456"},{name:"\u0421\u043F\u0435\u0446\u0456\u0430\u043B\u0456\u0441\u0442\u0438",value:O},{name:"\u041C\u0435\u043D\u0435\u0434\u0436\u0435\u0440\u0438",value:$},{name:"\u041A\u0435\u0440\u0456\u0432\u043D\u0438\u043A\u0438",value:j}]),f=u(()=>o.specialists.filter(({role:s})=>c.query.role?s.name===c.query.role:!0));async function v(){await d.show("specialist-new")}async function h(s){await _.replace({query:{role:s.value||void 0}})}async function l(s){o.specialists=s;const x=s.map(({id:U},y)=>({id:U,order:y}));await Q.specialist.bulk(x),await o.fetch()}return(s,x)=>{const U=a("UiTitle"),y=a("UiNotificationBadge"),C=a("UiButton"),B=a("UiNavigation"),z=a("UiContainer");return N(),b(z,{class:"specialists-page"},{default:t(()=>[D("div",X,[e(y,{class:"specialists-page-header__left",count:i(g)},{default:t(()=>[e(U,{size:"l",responsive:""},{default:t(()=>[J]),_:1})]),_:1},8,["count"]),D("div",K,[e(C,{size:"m",theme:"blue",responsive:"","right-icon":"outlined/plus",onClick:v},{default:t(()=>[Y]),_:1})])]),e(B,{class:"specialists-page__navigation",navigation:i(m),value:i(r),onInput:h},null,8,["navigation","value"]),e(V,{list:i(f),axis:"xy","item-class":["ui-grid-item","ui-grid-item_12","ui-grid-item_tablet_6","ui-grid-item_laptop_4","ui-grid-item_desktop_3"],"use-drag-handle":"",class:"ui-grid","onUpdate:list":l},{default:t(({item:w})=>[e(W,{specialist:w},null,8,["specialist"])]),_:1},8,["list"])]),_:1})}}});export{le as default};
