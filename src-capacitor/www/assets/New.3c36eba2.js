var O=Object.defineProperty,z=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var E=(n,t,a)=>t in n?O(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,i=(n,t)=>{for(var a in t||(t={}))G.call(t,a)&&E(n,a,t[a]);if(g)for(var a of g(t))Q.call(t,a)&&E(n,a,t[a]);return n},w=(n,t)=>z(n,j(t));import{a4 as X,k as U,Q as B,aG as d,ay as H,U as J,b1 as s,a2 as o,X as I,x as m,f as K,bp as W,a1 as M}from"./index.53588f62.js";import{u as Y}from"./procedures.f7d5b6cf.js";import{u as Z}from"./specialists.56f430f2.js";import{V as b,c as uu,a as x,e as eu,f as ou,u as tu}from"./index.e6dcdd48.js";import{P as au}from"./time.50f2cb44.js";import{m as F}from"./time.8571a5e6.js";import"./base.686dbe64.js";import"./toasts.113f48d8.js";import"./roles.61f7d6b9.js";import"./dayjs.228bf609.js";import"./isTomorrow.a3ceb101.js";import"./_commonjsHelpers.2cf1d77b.js";const lu=M(" \u0414\u043E\u0434\u0430\u0442\u0438 \u043F\u043E\u0441\u043B\u0443\u0433\u0443 "),nu=["onSubmit"],iu={class:"procedures-new__actions"},su=M(" \u0414\u043E\u0434\u0430\u0442\u0438 \u043F\u043E\u0441\u043B\u0443\u0433\u0443 "),yu=X({name:"New",props:{category:{type:Object,default:null}},emits:["close"],setup(n,{emit:t}){const a=n,y=Y(),D=Z(),C=U(!1),V=U([]),l=U({name:"",price:"",duration:null,description:"",category:a.category}),N={name:i(i(i({},b("\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043D\u0430\u0437\u0432\u0443 \u043F\u043E\u0441\u043B\u0443\u0433\u0438")),uu("\u041C\u0456\u043D\u0456\u043C\u0430\u043B\u044C\u043D\u0430 \u043A\u0456\u043B\u044C\u043A\u0456\u0441\u0442\u044C \u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432: 4",4)),x("\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u0430 \u043A\u0456\u043B\u044C\u043A\u0456\u0441\u0442\u044C \u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432: 255",255)),price:i(i(i({},b("\u0412\u043A\u0430\u0436\u0456\u0442\u044C \u0446\u0456\u043D\u0443")),eu("\u041C\u0456\u043D\u0456\u043C\u0430\u043B\u044C\u043D\u0430 \u0446\u0456\u043D\u0430: 0",0)),ou("\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u0430 \u0446\u0456\u043D\u0430: 99999",99999)),duration:i({},b("\u0412\u043A\u0430\u0436\u0456\u0442\u044C \u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C \u043F\u043E\u0441\u043B\u0443\u0433\u0438")),description:i({},x("\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u0430 \u043A\u0456\u043B\u044C\u043A\u0456\u0441\u0442\u044C \u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432: 255",255))},A=tu(N,l),_=B({get(){return F(l.value.duration||0)},set(r){var u;l.value.duration=(u=r==null?void 0:r.value)!=null?u:""}}),k=B(()=>au.map(r=>({name:F(r),value:r}))),P=B(()=>y.categories);async function T(){if(!!await A.$validate())try{C.value=!0,await y.createProcedure(w(i({},l.value),{specialistIds:V.value.map(({id:u})=>u)})),await D.fetch(),t("close")}finally{C.value=!1}}return(r,u)=>{const R=d("UiTitle"),v=d("UiInput"),p=d("UiField"),S=d("UiSelect"),q=d("UiMultiSelect"),L=d("UiButton"),$=d("UiFormValidator"),h=d("UiPopup");return H(),J(h,{class:"procedures-new",onClose:u[6]||(u[6]=c=>r.$emit("close"))},{default:s(()=>[o(R,{class:"procedures-new__title",size:"s"},{default:s(()=>[lu]),_:1}),I("form",{onSubmit:W(T,["prevent"])},[o($,{validate:m(A)},{default:s(({resetFieldError:c,getFieldError:f})=>[o(p,{label:"\u041D\u0430\u0437\u0432\u0430 \u043F\u043E\u0441\u043B\u0443\u0433\u0438",error:f("name"),required:""},{default:s(()=>[o(v,{modelValue:l.value.name,"onUpdate:modelValue":u[0]||(u[0]=e=>l.value.name=e),"left-icon":"outlined/pencil",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043D\u0430\u0437\u0432\u0443",onInput:e=>c("name")},null,8,["modelValue","onInput"])]),_:2},1032,["error"]),o(p,{label:"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0456\u044F"},{default:s(()=>[o(S,{modelValue:l.value.category,"onUpdate:modelValue":u[1]||(u[1]=e=>l.value.category=e),"label-key":"name",options:m(P),placeholder:"\u0412\u0438\u0431\u0440\u0430\u0442\u0438 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0456\u044E"},null,8,["modelValue","options"])]),_:1}),o(p,{label:"\u0426\u0456\u043D\u0430",error:f("price"),required:""},{default:s(()=>[o(v,{modelValue:l.value.price,"onUpdate:modelValue":u[2]||(u[2]=e=>l.value.price=e),type:"number","left-icon":"outlined/pencil",placeholder:"\u0412\u043A\u0430\u0436\u0456\u0442\u044C \u0446\u0456\u043D\u0443",onInput:e=>c("price")},null,8,["modelValue","onInput"])]),_:2},1032,["error"]),o(p,{label:"\u0422\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C",error:f("duration"),required:""},{default:s(()=>[o(S,{modelValue:m(_),"onUpdate:modelValue":[u[3]||(u[3]=e=>K(_)?_.value=e:null),e=>c("duration")],"label-key":"name",options:m(k),clearable:!1,"left-icon":"outlined/pencil",placeholder:"\u0412\u0438\u0431\u0440\u0430\u0442\u0438 \u0447\u0430\u0441"},null,8,["modelValue","options","onUpdate:modelValue"])]),_:2},1032,["error"]),o(p,{label:"\u0421\u043F\u0435\u0446\u0456\u0430\u043B\u0456\u0441\u0442\u0438"},{default:s(()=>[o(q,{modelValue:V.value,"onUpdate:modelValue":u[4]||(u[4]=e=>V.value=e),options:m(D).specialists,"label-key":"fullName",placeholder:"\u0412\u0438\u0431\u0440\u0430\u0442\u0438 \u0441\u043F\u0435\u0446\u0456\u0430\u043B\u0456\u0441\u0442\u0456\u0432"},null,8,["modelValue","options"])]),_:1}),o(p,{label:"\u041E\u043F\u0438\u0441",error:f("description")},{default:s(()=>[o(v,{modelValue:l.value.description,"onUpdate:modelValue":u[5]||(u[5]=e=>l.value.description=e),tag:"textarea",name:"description",placeholder:"\u0414\u043E\u0431\u0430\u0432\u0442\u0435 \u043E\u043F\u0438\u0441",onInput:e=>c("description")},null,8,["modelValue","onInput"])]),_:2},1032,["error"]),I("div",iu,[o(L,{type:"submit",size:"l",theme:"blue",loading:C.value},{default:s(()=>[su]),_:1},8,["loading"])])]),_:1},8,["validate"])],40,nu)]),_:1})}}});export{yu as default};
