var z=Object.defineProperty;var I=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var F=(p,l,s)=>l in p?z(p,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):p[l]=s,g=(p,l)=>{for(var s in l||(l={}))M.call(l,s)&&F(p,s,l[s]);if(I)for(var s of I(l))N.call(l,s)&&F(p,s,l[s]);return p};import{a4 as L,k as v,Q as G,an as Q,aG as r,ay as R,W,a2 as u,b1 as t,X,x as o,A as n,bp as j,a1 as S}from"./index.53588f62.js";import{u as H}from"./quasar.esm.prod.7cf60e50.js";import{a as J,b as K,h as O}from"./base.686dbe64.js";import{u as Y}from"./toasts.113f48d8.js";import{V as Z,a as U,u as uu}from"./index.e6dcdd48.js";import{_ as eu}from"./FileUpload.8d271c57.js";import{api as y,apiClient as au}from"./api.50e126cb.js";import"./_commonjsHelpers.2cf1d77b.js";const ou={class:"company-settings-page"},iu=["onSubmit"],tu=S(" \u041F\u0440\u043E \u043A\u043E\u043C\u043F\u0430\u043D\u0456\u044E "),lu=S(" \u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 "),yu=L({name:"CompanySettingsPage",setup(p){H({title:"\u0406\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0456\u044F \u043F\u0440\u043E \u043A\u043E\u043C\u043F\u0430\u043D\u0456\u044E - pullcrm"});const l=J(),s=Y(),e=K(),f=v(!1),A=v([]),E=v([]),w={name:g(g({},Z("\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043D\u0430\u0437\u0432\u0443 \u043A\u043E\u043C\u043F\u0430\u043D\u0456\u0457")),U("\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u0430 \u043A\u0456\u043B\u044C\u043A\u0456\u0441\u0442\u044C \u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432: 255",255)),address:g({},U("\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u0430 \u043A\u0456\u043B\u044C\u043A\u0456\u0441\u0442\u044C \u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432: 255",255)),description:g({},U("\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u0430 \u043A\u0456\u043B\u044C\u043A\u0456\u0441\u0442\u044C \u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432: 255",255))},D=uu(w,e.company),k=G(()=>{var d;return(d=e.company.logo)==null?void 0:d.path});Q(async()=>{const d=await Promise.all([y.companyTypes.all(),y.cities.all()]);A.value=d[0],E.value=d[1]});async function P(d){const i=l.profile.id,_=new FormData;_.append("files",d),_.append("userId",i);const[V]=await au.upload(_);return await y.companies.update(e.company.id,{logoId:V.id}),await l.fetchProfile()}async function x(){if(!!await D.$validate())try{f.value=!0,await y.companies.update(e.company.id,O(e.company)),s.show({title:"\u0417\u0431\u0435\u0440\u0435\u0436\u0435\u043D\u043E!"}),await l.fetchProfile()}finally{f.value=!1}}return(d,i)=>{const _=r("UiTitle"),V=r("UiAvatar"),m=r("UiField"),c=r("UiInput"),B=r("UiSelect"),T=r("UiDivider"),h=r("UiButton"),q=r("UiFormValidator"),$=r("UiPanel");return R(),W("div",ou,[u($,{size:"m",responsive:""},{default:t(()=>[X("form",{onSubmit:j(x,["prevent"])},[u(q,{validate:o(D),class:"ui-grid"},{default:t(({resetFieldError:C,getFieldError:b})=>[u(_,{size:"s",class:n(["ui-grid-item","ui-grid-item_12"])},{default:t(()=>[tu]),_:1}),u(m,{class:n(["ui-grid-item","ui-grid-item_12"])},{default:t(()=>[u(eu,{image:o(k),responsive:"",onInput:P},{default:t(({url:a})=>[u(V,{image:a,name:o(e).company.name,size:"l",responsive:""},null,8,["image","name"])]),_:1},8,["image"])]),_:1}),u(m,{label:"\u041D\u0430\u0437\u0432\u0430 \u043A\u043E\u043C\u043F\u0430\u043D\u0456\u0457",error:b("name"),required:"",class:n(["ui-grid-item","ui-grid-item_12"])},{default:t(()=>[u(c,{modelValue:o(e).company.name,"onUpdate:modelValue":i[0]||(i[0]=a=>o(e).company.name=a),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043D\u0430\u0437\u0432\u0443",onInput:a=>C("name")},null,8,["modelValue","onInput"])]),_:2},1032,["error"]),u(m,{label:"\u041C\u0456\u0441\u0442\u043E",required:"",class:n(["ui-grid-item","ui-grid-item_12"])},{default:t(()=>[u(B,{modelValue:o(e).company.city,"onUpdate:modelValue":i[1]||(i[1]=a=>o(e).company.city=a),"label-key":"name",required:"",options:A.value,placeholder:"\u0412\u0438\u0431\u0440\u0430\u0442\u0438 \u043C\u0456\u0441\u0442\u043E"},null,8,["modelValue","options"])]),_:1}),u(m,{label:"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0456\u044F",required:"",class:n(["ui-grid-item","ui-grid-item_12"])},{default:t(()=>[u(B,{modelValue:o(e).company.type,"onUpdate:modelValue":i[2]||(i[2]=a=>o(e).company.type=a),"label-key":"name",required:"",options:E.value,clearable:!1,placeholder:"\u0412\u0438\u0431\u0440\u0430\u0442\u0438 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0456\u044E"},null,8,["modelValue","options"])]),_:1}),u(m,{label:"\u0410\u0434\u0440\u0435\u0441\u0430",error:b("address"),class:n(["ui-grid-item","ui-grid-item_12"])},{default:t(()=>[u(c,{modelValue:o(e).company.address,"onUpdate:modelValue":i[3]||(i[3]=a=>o(e).company.address=a),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u0430\u0434\u0440\u0435\u0441\u0443",onInput:a=>C("address")},null,8,["modelValue","onInput"])]),_:2},1032,["error"]),u(m,{label:"\u0422\u0435\u043B\u0435\u0444\u043E\u043D",class:n(["ui-grid-item","ui-grid-item_12"])},{default:t(()=>[u(c,{modelValue:o(e).company.phone,"onUpdate:modelValue":i[4]||(i[4]=a=>o(e).company.phone=a),mask:"+38 (###) #### ###",inputmode:"tel",placeholder:"066"},null,8,["modelValue"])]),_:1}),u(m,{label:"\u041F\u0440\u043E \u043A\u043E\u043C\u043F\u0430\u043D\u0456\u044E",error:b("description"),class:n(["ui-grid-item","ui-grid-item_12"])},{default:t(()=>[u(c,{modelValue:o(e).company.description,"onUpdate:modelValue":i[5]||(i[5]=a=>o(e).company.description=a),tag:"textarea",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u0442\u0435\u043A\u0441\u0442",onInput:a=>C("description")},null,8,["modelValue","onInput"])]),_:2},1032,["error"]),u(T,{class:n(["ui-grid-item","ui-grid-item_12"])}),u(m,{label:"Viber",class:n(["ui-grid-item","ui-grid-item_6"])},{default:t(()=>[u(c,{modelValue:o(e).company.viber,"onUpdate:modelValue":i[6]||(i[6]=a=>o(e).company.viber=a),placeholder:"Viber"},null,8,["modelValue"])]),_:1}),u(m,{label:"Telegram",class:n(["ui-grid-item","ui-grid-item_6","ui-grid-item_mobile_12"])},{default:t(()=>[u(c,{modelValue:o(e).company.telegram,"onUpdate:modelValue":i[7]||(i[7]=a=>o(e).company.telegram=a),placeholder:"Telegram"},null,8,["modelValue"])]),_:1}),u(m,{label:"Instagram",class:n(["ui-grid-item","ui-grid-item_6","ui-grid-item_mobile_12"])},{default:t(()=>[u(c,{modelValue:o(e).company.instagram,"onUpdate:modelValue":i[8]||(i[8]=a=>o(e).company.instagram=a),placeholder:"Instagram"},null,8,["modelValue"])]),_:1}),u(m,{label:"Facebook",class:n(["ui-grid-item","ui-grid-item_6","ui-grid-item_mobile_12"])},{default:t(()=>[u(c,{modelValue:o(e).company.facebook,"onUpdate:modelValue":i[9]||(i[9]=a=>o(e).company.facebook=a),placeholder:"Facebook"},null,8,["modelValue"])]),_:1}),u(h,{type:"submit",theme:"blue",loading:f.value,responsive:"",class:n(["ui-grid-item","ui-grid-item_12","ui-grid-item_mobile_12"])},{default:t(()=>[lu]),_:1},8,["loading"])]),_:1},8,["validate"])],40,iu)]),_:1})])}}});export{yu as default};
