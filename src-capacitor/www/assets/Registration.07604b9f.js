var Z=Object.defineProperty,J=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var V=(u,e,t)=>e in u?Z(u,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):u[e]=t,p=(u,e)=>{for(var t in e||(e={}))W.call(e,t)&&V(u,t,e[t]);if(D)for(var t of D(e))j.call(e,t)&&V(u,t,e[t]);return u},T=(u,e)=>J(u,Q(e));import{a4 as uu,bx as eu,bD as tu,r as ru,k as nu,as as au,aG as h,ay as ou,U as su,b1 as d,X as F,a2 as f,x as iu,bp as lu,a1 as P}from"./index.53588f62.js";import{u as fu}from"./quasar.esm.prod.7cf60e50.js";import{u as pu}from"./base.686dbe64.js";import{u as cu}from"./popup.f1b7e5e0.js";import{g,_ as mu,a as du,h as _u,j as hu,k as vu,e as gu,f as yu,b as Cu,c as Eu}from"./_setToString.5b88c727.js";import{i as S}from"./isSymbol.03012f90.js";import{c as $u,a as bu}from"./isObjectLike.0d538a5a.js";import{c as x,V as I,b as Iu,u as Fu}from"./index.e6dcdd48.js";import{_ as Pu}from"./Layout.ed4dcc8e.js";import{api as U}from"./api.50e126cb.js";import"./_commonjsHelpers.2cf1d77b.js";import"./logo.0179c6cf.js";var Su=g,Au=S,Bu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wu=/^\w*$/;function Du(u,e){if(Su(u))return!1;var t=typeof u;return t=="number"||t=="symbol"||t=="boolean"||u==null||Au(u)?!0:wu.test(u)||!Bu.test(u)||e!=null&&u in Object(e)}var Vu=Du,k=mu,Tu="Expected a function";function A(u,e){if(typeof u!="function"||e!=null&&typeof e!="function")throw new TypeError(Tu);var t=function(){var n=arguments,a=e?e.apply(this,n):n[0],r=t.cache;if(r.has(a))return r.get(a);var o=u.apply(this,n);return t.cache=r.set(a,o)||r,o};return t.cache=new(A.Cache||k),t}A.Cache=k;var xu=A,Uu=xu,Nu=500;function Ru(u){var e=Uu(u,function(n){return t.size===Nu&&t.clear(),n}),t=e.cache;return e}var Mu=Ru,Ou=Mu,zu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ku=/\\(\\)?/g,qu=Ou(function(u){var e=[];return u.charCodeAt(0)===46&&e.push(""),u.replace(zu,function(t,n,a,r){e.push(a?r.replace(ku,"$1"):n||t)}),e}),Ku=qu,N=$u,Gu=du,Lu=g,Xu=S,Hu=1/0,R=N?N.prototype:void 0,M=R?R.toString:void 0;function q(u){if(typeof u=="string")return u;if(Lu(u))return Gu(u,q)+"";if(Xu(u))return M?M.call(u):"";var e=u+"";return e=="0"&&1/u==-Hu?"-0":e}var Yu=q,Zu=Yu;function Ju(u){return u==null?"":Zu(u)}var Qu=Ju,Wu=g,ju=Vu,u4=Ku,e4=Qu;function t4(u,e){return Wu(u)?u:ju(u,e)?[u]:u4(e4(u))}var y=t4,r4=S,n4=1/0;function a4(u){if(typeof u=="string"||r4(u))return u;var e=u+"";return e=="0"&&1/u==-n4?"-0":e}var B=a4,o4=y,s4=B;function i4(u,e){e=o4(e,u);for(var t=0,n=e.length;u!=null&&t<n;)u=u[s4(e[t++])];return t&&t==n?u:void 0}var l4=i4,O=_u;function f4(u,e,t){e=="__proto__"&&O?O(u,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):u[e]=t}var p4=f4,c4=p4,m4=hu,d4=Object.prototype,_4=d4.hasOwnProperty;function h4(u,e,t){var n=u[e];(!(_4.call(u,e)&&m4(n,t))||t===void 0&&!(e in u))&&c4(u,e,t)}var v4=h4,g4=9007199254740991,y4=/^(?:0|[1-9]\d*)$/;function C4(u,e){var t=typeof u;return e=e==null?g4:e,!!e&&(t=="number"||t!="symbol"&&y4.test(u))&&u>-1&&u%1==0&&u<e}var K=C4,E4=v4,$4=y,b4=K,z=bu,I4=B;function F4(u,e,t,n){if(!z(u))return u;e=$4(e,u);for(var a=-1,r=e.length,o=r-1,i=u;i!=null&&++a<r;){var l=I4(e[a]),_=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return u;if(a!=o){var v=i[l];_=n?n(v,l,i):void 0,_===void 0&&(_=z(v)?v:b4(e[a+1])?[]:{})}E4(i,l,_),i=i[l]}return u}var P4=F4,S4=l4,A4=P4,B4=y;function w4(u,e,t){for(var n=-1,a=e.length,r={};++n<a;){var o=e[n],i=S4(u,o);t(i,o)&&A4(r,B4(o,u),i)}return r}var D4=w4;function V4(u,e){return u!=null&&e in Object(u)}var T4=V4,x4=y,U4=vu,N4=g,R4=K,M4=gu,O4=B;function z4(u,e,t){e=x4(e,u);for(var n=-1,a=e.length,r=!1;++n<a;){var o=O4(e[n]);if(!(r=u!=null&&t(u,o)))break;u=u[o]}return r||++n!=a?r:(a=u==null?0:u.length,!!a&&M4(a)&&R4(o,a)&&(N4(u)||U4(u)))}var k4=z4,q4=T4,K4=k4;function G4(u,e){return u!=null&&K4(u,e,q4)}var L4=G4,X4=D4,H4=L4;function Y4(u,e){return X4(u,e,function(t,n){return H4(u,n)})}var Z4=Y4,J4=yu;function Q4(u){var e=u==null?0:u.length;return e?J4(u,1):[]}var W4=Q4,j4=W4,u0=Cu,e0=Eu;function t0(u){return e0(u0(u,void 0,j4),u+"")}var r0=t0,n0=Z4,a0=r0,o0=a0(function(u,e){return u==null?{}:n0(u,e)}),s0=o0;const i0=["onSubmit"],l0=P(" \u041D\u0430\u0442\u0438\u0441\u043A\u0430\u044E\u0447\u0438 \u043D\u0430 \u043A\u043D\u043E\u043F\u043A\u0443, \u044F \u043F\u043E\u0433\u043E\u0434\u0436\u0443\u044E\u0441\u044C \u0456\u0437 "),f0=F("a",{href:"#"},"\u0423\u0433\u043E\u0434\u043E\u044E \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430",-1),p0=P(" \u0442\u0430 "),c0=F("a",{href:"#"},"\u041F\u043E\u043B\u0456\u0442\u0438\u043A\u043E\u044E \u043E\u0431\u0440\u043E\u0431\u043A\u0438 \u043F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u0438\u0445 \u0434\u0430\u043D\u0438\u0445",-1),m0=P(" \u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044C "),S0=uu({name:"Registration",setup(u){fu({title:"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044F - pullcrm"});const e=eu(),t=tu(),n=pu(),a=cu(),r=ru({fullName:"",phone:"",password:""}),o=nu(!1),i={fullName:p(p({},x("\u041C\u0456\u043D\u0456\u043C\u0430\u043B\u044C\u043D\u0430 \u043A\u0456\u043B\u044C\u043A\u0456\u0441\u0442\u044C \u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432: 4",4)),I("\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u0432\u0430\u0448\u0435 \u0456\u043C'\u044F")),phone:p(p({},Iu("\u041D\u0435 \u0432\u0456\u0440\u043D\u0438\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u043D\u043E\u043C\u0435\u0440\u0443")),I("\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0443")),password:p(p({},x("\u041C\u0456\u043D\u0456\u043C\u0430\u043B\u044C\u043D\u0430 \u043A\u0456\u043B\u044C\u043A\u0456\u0441\u0442\u044C \u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432: 4",4)),I("\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C"))},l=Fu(i,r);au(()=>{const{phone:m}=e.query;m&&(r.phone=String(m))});async function _(){if(!!await l.$validate())try{return o.value=!0,await U.users.confirmation({phone:r.phone,type:"REGISTRATION"}),v()}catch(s){if([s.code===400&&{field:"phone",error:"invalid"}].filter(Boolean).length>0)return;throw s}finally{o.value=!1}}async function v(){if(await a.smsConfirmation({title:"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044F",subTitle:`\u041D\u0430 \u0432\u0430\u0448 \u0442\u0435\u043B\u0435\u0444\u043E\u043D ${r.phone} \u0431\u0443\u0432 \u0432\u0456\u0434\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0439 \u0421\u041C\u0421-\u043A\u043E\u0434 \u0434\u043B\u044F \u043F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043D\u043D\u044F \u0440\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u0457`,submit:G}))return t.push({name:"companyCreate",query:s0(e.query,["companyType"])})}async function G(m){const s=T(p({},r),{code:m});await U.auth.registration(s),await n.login(s)}function L(){t.push({name:"login",query:p({},e.query)})}return(m,s)=>{const w=h("UiBack"),C=h("UiInput"),E=h("UiField"),X=h("UiText"),H=h("UiButton"),Y=h("UiFormValidator");return ou(),su(Pu,{title:"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044F","sub-title":"\u041F\u0440\u043E\u0439\u0434\u0456\u0442\u044C \u0440\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044E, \u0449\u043E\u0431 \u043E\u0442\u0440\u0438\u043C\u0430\u0442\u0438 \u0434\u043E\u0441\u0442\u0443\u043F \u0434\u043E \u0441\u0432\u043E\u0454\u0457 \u043A\u043E\u043C\u043F\u0430\u043D\u0456\u0457",class:"auth-page-registration"},{default:d(()=>[F("form",{onSubmit:lu(_,["prevent"])},[f(w,{class:"auth-page-registration__back",onClick:L}),f(Y,{validate:iu(l)},{default:d(({resetFieldError:$,getFieldError:b})=>[f(E,{label:"\u0406\u043C'\u044F \u0442\u0430 \u041F\u0440\u0456\u0437\u0432\u0438\u0449\u0435",error:b("fullName")},{default:d(()=>[f(C,{modelValue:r.fullName,"onUpdate:modelValue":s[0]||(s[0]=c=>r.fullName=c),"left-icon":"outlined/pencil",name:"name",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u0406\u043C'\u044F \u0456 \u041F\u0440\u0438\u0437\u0432\u0456\u0449\u0435",onInput:c=>$("fullName")},null,8,["modelValue","onInput"])]),_:2},1032,["error"]),f(E,{label:"\u0422\u0435\u043B\u0435\u0444\u043E\u043D",error:b("phone")},{default:d(()=>[f(C,{modelValue:r.phone,"onUpdate:modelValue":s[1]||(s[1]=c=>r.phone=c),mask:"+38 (###) #### ###",name:"phone",type:"phone",inputmode:"tel","left-icon":"outlined/phone",placeholder:"066",onInput:c=>$("phone")},null,8,["modelValue","onInput"])]),_:2},1032,["error"]),f(E,{label:"\u041F\u0430\u0440\u043E\u043B\u044C",error:b("password")},{default:d(()=>[f(C,{modelValue:r.password,"onUpdate:modelValue":s[2]||(s[2]=c=>r.password=c),"left-icon":"outlined/key",name:"password",type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C",onInput:c=>$("password")},null,8,["modelValue","onInput"])]),_:2},1032,["error"]),f(X,{class:"auth-page-registration__policy",size:"s"},{default:d(()=>[l0,f0,p0,c0]),_:1}),f(H,{class:"auth-page-registration__button",type:"submit",size:"l",theme:"blue",loading:o.value},{default:d(()=>[m0]),_:1},8,["loading"])]),_:1},8,["validate"])],40,i0)]),_:1})}}});export{S0 as default};
